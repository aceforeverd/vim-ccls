Before:
  let b:script = 'autoload/ccls/messages.vim'
  source test/utils.vim

After:
  unlet! b:script

Execute(Test s:path2uri):
  if has('win32')
    let path = 'C:\foò\bär\file.cpp'
    let expected = 'file://C:\fo%C3%B2\b%C3%A4r\file.cpp'
  else
    let path = '/foò/bär/file.cpp'
    let expected = 'file:///fo%C3%B2/b%C3%A4r/file.cpp'
  endif

  let uri = Call(b:script, 'path2uri', path)

  AssertEqual expected, uri

Execute(Test s:uri2path):
  if has('win32')
    let uri = 'file://C:\fo%C3%B2\b%C3%A4r\file.cpp'
    let expected = 'C:\foò\bär\file.cpp'
  else
    let uri = 'file:///fo%C3%B2/b%C3%A4r/file.cpp'
    let expected = '/foò/bär/file.cpp'
  endif

  let path = Call(b:script, 'uri2path', uri)

  AssertEqual expected, path
